package handler_test

import (
	"encoding/json"
	"log"
	"testing"

	"github.com/terloo/xiaochen/handler"
	"github.com/terloo/xiaochen/wxbot"
)

func TestMessageFormat(t *testing.T) {

	privateChat := &wxbot.WxGeneralMsgData{}
	privateChatWithRefer := &wxbot.WxGeneralMsgData{}
	privateChatWithCommand := &wxbot.WxGeneralMsgData{}
	privateChatWithReferWithCommand := &wxbot.WxGeneralMsgData{}
	groupChat := &wxbot.WxGeneralMsgData{}
	groupChatWithRefer := &wxbot.WxGeneralMsgData{}
	groupChatWithCommand := &wxbot.WxGeneralMsgData{}
	groupChatWithReferWithCommand := &wxbot.WxGeneralMsgData{}
	groupChatWithAt := &wxbot.WxGeneralMsgData{}
	groupChatWithReferWithAt := &wxbot.WxGeneralMsgData{}
	groupChatWithCommandWithAt := &wxbot.WxGeneralMsgData{}
	groupChatWithReferWithCommandWithAt := &wxbot.WxGeneralMsgData{}

	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGvsBCAcS9gE8bXNnc291cmNlPgogICAgPHNlY19tc2dfbm9kZT4KICAgICAgICA8YWxub2RlPgogICAgICAgICAgICA8ZnI+MTwvZnI+CiAgICAgICAgPC9hbG5vZGU+CiAgICA8L3NlY19tc2dfbm9kZT4KICAgIDxwdWE+MTwvcHVhPgogICAgPHNpZ25hdHVyZT5WMV9MZkNueC9kQ3x2MV9MZkNueC9kQzwvc2lnbmF0dXJlPgogICAgPHRtcF9ub2RlPgogICAgICAgIDxwdWJsaXNoZXItaWQgLz4KICAgIDwvdG1wX25vZGU+CjwvbXNnc291cmNlPgoaJAgCEiBmNmI2NGM1ZjI4OTBkNzIwMzkyODUxYjM5NWE0ZjNkOQ==\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264298\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762176\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"2379178631500610834\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sequence\":\"1715264298000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"123\",\"StrTalker\":\"wxid_e2whhoao16so21\",\"SubType\":\"0\",\"TalkerId\":\"2\",\"Type\":\"1\",\"localId\":\"994\"}"), privateChat)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGuwCCAcS5wI8bXNnc291cmNlPgogICAgPHB1YT4xPC9wdWE+CiAgICA8c2VjX21zZ19ub2RlPgogICAgICAgIDx1dWlkPjM3OTUxOTc2NjQ2MjZiNTAxZTRiNDBiNWI3OWQwNGQ1XzwvdXVpZD4KICAgICAgICA8cmlzay1maWxlLWZsYWcgLz4KICAgICAgICA8cmlzay1maWxlLW1kNS1saXN0IC8+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CiAgICA8c2lnbmF0dXJlPlYxX1pTUmN0NkV4fHYxX2p4WHdGdUlkPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIGExMTFjNDY0ZWYwZGYwYzQ1Mzc0MzUwNjgxNTJiMjUzGlIIBBJOd3hpZF9leW9tZ2xodjh5aDgyMlxGaWxlU3RvcmFnZVxDYWNoZVwyMDI0LTA1XDhmYWUwYzI5ZGNiMGU1ODA0NDhiMDFiNDA1NzM0MzA5\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>111</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2379178631500610834</svrid>\\n\\t\\t\\t<fromusr>wxid_eyomglhv8yh822</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264298</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>123</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264322\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762177\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"2894796172161511741\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sequence\":\"1715264322000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"wxid_e2whhoao16so21\",\"SubType\":\"57\",\"TalkerId\":\"2\",\"Type\":\"49\",\"localId\":\"995\"}"), privateChatWithRefer)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGvsBCAcS9gE8bXNnc291cmNlPgogICAgPHNlY19tc2dfbm9kZT4KICAgICAgICA8YWxub2RlPgogICAgICAgICAgICA8ZnI+MTwvZnI+CiAgICAgICAgPC9hbG5vZGU+CiAgICA8L3NlY19tc2dfbm9kZT4KICAgIDxwdWE+MTwvcHVhPgogICAgPHNpZ25hdHVyZT5WMV9vM0d3bEpVRnx2MV9vM0d3bEpVRjwvc2lnbmF0dXJlPgogICAgPHRtcF9ub2RlPgogICAgICAgIDxwdWJsaXNoZXItaWQgLz4KICAgIDwvdG1wX25vZGU+CjwvbXNnc291cmNlPgoaJAgCEiBkMjgwYzU4ZTMwM2ZjZjQ3MDNmODBkNjkyNzYyMDIzNQ==\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264345\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762178\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"8554538664853335729\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sequence\":\"1715264345000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"/天气\",\"StrTalker\":\"wxid_e2whhoao16so21\",\"SubType\":\"0\",\"TalkerId\":\"2\",\"Type\":\"1\",\"localId\":\"996\"}"), privateChatWithCommand)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGuwCCAcS5wI8bXNnc291cmNlPgogICAgPHB1YT4xPC9wdWE+CiAgICA8c2VjX21zZ19ub2RlPgogICAgICAgIDx1dWlkPjM2ZDg1ODM1M2FkN2I5NjZkNjE3MDlhOGYzZmEyYWQyXzwvdXVpZD4KICAgICAgICA8cmlzay1maWxlLWZsYWcgLz4KICAgICAgICA8cmlzay1maWxlLW1kNS1saXN0IC8+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CiAgICA8c2lnbmF0dXJlPlYxX0doT25ZUFk5fHYxXzlDL09ORUZOPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIDFhZDVhYTU3NzIyOGJiZjY5NGM0MmJhNDM5MGVjM2U3GlIIBBJOd3hpZF9leW9tZ2xodjh5aDgyMlxGaWxlU3RvcmFnZVxDYWNoZVwyMDI0LTA1XDY4ODQ4NTBhMWY3MDZlNmRiYmRjOTY5MmU5NTRlN2Uy\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>/天气</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2379178631500610834</svrid>\\n\\t\\t\\t<fromusr>wxid_eyomglhv8yh822</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264298</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>123</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264361\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762179\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"5422329148763113111\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sequence\":\"1715264361000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"wxid_e2whhoao16so21\",\"SubType\":\"57\",\"TalkerId\":\"2\",\"Type\":\"49\",\"localId\":\"997\"}"), privateChatWithReferWithCommand)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRq1AggHErACPG1zZ3NvdXJjZT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX1pMQ1k0VXNHfHYxX1pMQ1k0VXNHPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIDI5Mzc4Yjc5YjA2YjQ1ODlkZjVmNGI0YjNkZDg5Yzlh\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264448\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762180\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"2880020896277436103\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264448000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"145\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"0\",\"TalkerId\":\"5\",\"Type\":\"1\",\"localId\":\"998\"}"), groupChat)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRqmAwgHEqEDPG1zZ3NvdXJjZT4KICAgIDxwdWE+MTwvcHVhPgogICAgPHNlY19tc2dfbm9kZT4KICAgICAgICA8dXVpZD5mZTkyZjM3MzE1NTNkNzI1MGE0MTBjNDg4MWVlYWM4OF88L3V1aWQ+CiAgICAgICAgPHJpc2stZmlsZS1mbGFnIC8+CiAgICAgICAgPHJpc2stZmlsZS1tZDUtbGlzdCAvPgogICAgICAgIDxhbG5vZGU+CiAgICAgICAgICAgIDxmcj4xPC9mcj4KICAgICAgICA8L2Fsbm9kZT4KICAgIDwvc2VjX21zZ19ub2RlPgogICAgPHNpbGVuY2U+MDwvc2lsZW5jZT4KICAgIDxtZW1iZXJjb3VudD4yPC9tZW1iZXJjb3VudD4KICAgIDxzaWduYXR1cmU+VjFfM3FMZnQ3Wld8djFfZHBYYVBSQVo8L3NpZ25hdHVyZT4KICAgIDx0bXBfbm9kZT4KICAgICAgICA8cHVibGlzaGVyLWlkIC8+CiAgICA8L3RtcF9ub2RlPgo8L21zZ3NvdXJjZT4KGiQIAhIgZjZjMjllZDkyMjNmMDZmNzRiZTgyODQwYjcwMTM5MGYaUggEEk53eGlkX2V5b21nbGh2OHloODIyXEZpbGVTdG9yYWdlXENhY2hlXDIwMjQtMDVcNGMzNTE4MDg2MjlkOWJlY2MzYzFjMzQyZjRkYzhjMDQ=\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>556</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2880020896277436103</svrid>\\n\\t\\t\\t<fromusr>38891094226@chatroom</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264448</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>145</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264467\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762181\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"373047736259728667\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264467000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"57\",\"TalkerId\":\"5\",\"Type\":\"49\",\"localId\":\"999\"}"), groupChatWithRefer)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRq1AggHErACPG1zZ3NvdXJjZT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX1JkNUx6NEdOfHYxX1JkNUx6NEdOPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIDU2NzQ1Mzk2ODNlMzg3Mjc3NGM3YzhiZjQ3ZmMyYWRh\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264490\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762182\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"278505806932135556\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264490000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"/天气\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"0\",\"TalkerId\":\"5\",\"Type\":\"1\",\"localId\":\"1000\"}"), groupChatWithCommand)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRqmAwgHEqEDPG1zZ3NvdXJjZT4KICAgIDxwdWE+MTwvcHVhPgogICAgPHNlY19tc2dfbm9kZT4KICAgICAgICA8dXVpZD45NTZiOTMxOTZiMmQxNGUwZmVhMTM5OTdhYTFiMjkwNV88L3V1aWQ+CiAgICAgICAgPHJpc2stZmlsZS1mbGFnIC8+CiAgICAgICAgPHJpc2stZmlsZS1tZDUtbGlzdCAvPgogICAgICAgIDxhbG5vZGU+CiAgICAgICAgICAgIDxmcj4xPC9mcj4KICAgICAgICA8L2Fsbm9kZT4KICAgIDwvc2VjX21zZ19ub2RlPgogICAgPHNpbGVuY2U+MDwvc2lsZW5jZT4KICAgIDxtZW1iZXJjb3VudD4yPC9tZW1iZXJjb3VudD4KICAgIDxzaWduYXR1cmU+VjFfdkdOWnN4NGF8djFfb00vWndud1M8L3NpZ25hdHVyZT4KICAgIDx0bXBfbm9kZT4KICAgICAgICA8cHVibGlzaGVyLWlkIC8+CiAgICA8L3RtcF9ub2RlPgo8L21zZ3NvdXJjZT4KGiQIAhIgY2E1MWIwYTNkY2EyMGEyZmRlYjNkMWZhYjI3NmFjYTgaUggEEk53eGlkX2V5b21nbGh2OHloODIyXEZpbGVTdG9yYWdlXENhY2hlXDIwMjQtMDVcM2Q3YzUwODg5Nzg4MmJkY2ZhZGM4MjJiNDJhNWFmMDA=\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>/天气</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2880020896277436103</svrid>\\n\\t\\t\\t<fromusr>38891094226@chatroom</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264448</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>145</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264505\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762183\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"9207275500933996742\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264505000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"57\",\"TalkerId\":\"5\",\"Type\":\"49\",\"localId\":\"1001\"}"), groupChatWithReferWithCommand)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRqBAwgHEvwCPG1zZ3NvdXJjZT4KICAgIDxhdHVzZXJsaXN0PgogICAgICAgIDwhW0NEQVRBWyx3eGlkX2V5b21nbGh2OHloODIyXV0+CiAgICA8L2F0dXNlcmxpc3Q+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX1hxSDY4enFCfHYxX1hxSDY4enFCPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CjwvbXNnc291cmNlPgoaJAgCEiA4Mzg2NjFhZjcxOWRiM2I3ZWFkMzExMmMyMDExZGU5Mw==\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264528\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762184\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"16634766137396757\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264528000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"@xiaochen 146\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"0\",\"TalkerId\":\"5\",\"Type\":\"1\",\"localId\":\"1002\"}"), groupChatWithAt)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRryAwgHEu0DPG1zZ3NvdXJjZT4KICAgIDxhdHVzZXJsaXN0PgogICAgICAgIDwhW0NEQVRBWyx3eGlkX2V5b21nbGh2OHloODIyXV0+CiAgICA8L2F0dXNlcmxpc3Q+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPHV1aWQ+ODY1Zjk4MTE2ZDhkOGYzMGU3ZDgzMmNjNzEwYWFlMmRfPC91dWlkPgogICAgICAgIDxyaXNrLWZpbGUtZmxhZyAvPgogICAgICAgIDxyaXNrLWZpbGUtbWQ1LWxpc3QgLz4KICAgICAgICA8YWxub2RlPgogICAgICAgICAgICA8ZnI+MTwvZnI+CiAgICAgICAgPC9hbG5vZGU+CiAgICA8L3NlY19tc2dfbm9kZT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX3VpWW1lK21zfHYxX1QwSkJXcjBrPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIGRiNDRiZDg3YzMyMGY5ZDA1MjU2ZDZmZmUyZGMwYzI0GlIIBBJOd3hpZF9leW9tZ2xodjh5aDgyMlxGaWxlU3RvcmFnZVxDYWNoZVwyMDI0LTA1XGY3OGU3ODcwMTRjNGE1NzFhOWYxMTgxMjIzY2FhMGQ4\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>@xiaochen 789</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2880020896277436103</svrid>\\n\\t\\t\\t<fromusr>38891094226@chatroom</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264448</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>145</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264545\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762185\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"4138776854690465853\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264545000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"57\",\"TalkerId\":\"5\",\"Type\":\"49\",\"localId\":\"1003\"}"), groupChatWithReferWithAt)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRqBAwgHEvwCPG1zZ3NvdXJjZT4KICAgIDxhdHVzZXJsaXN0PgogICAgICAgIDwhW0NEQVRBWyx3eGlkX2V5b21nbGh2OHloODIyXV0+CiAgICA8L2F0dXNlcmxpc3Q+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX2NZS1JRN1FqfHYxX2NZS1JRN1FqPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPGFsbm9kZT4KICAgICAgICAgICAgPGZyPjE8L2ZyPgogICAgICAgIDwvYWxub2RlPgogICAgPC9zZWNfbXNnX25vZGU+CjwvbXNnc291cmNlPgoaJAgCEiBjYWYzYzdmN2I3NDg3ODhmZTAyNDRjNWZiYmNjMTViMA==\",\"BytesTrans\":\"\",\"CompressContent\":\"\",\"CreateTime\":\"1715264609\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762187\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"5792487513663024031\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264609000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"@xiaochen /天气\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"0\",\"TalkerId\":\"5\",\"Type\":\"1\",\"localId\":\"1005\"}"), groupChatWithCommandWithAt)
	json.Unmarshal([]byte("{\"BytesExtra\":\"CgQIEBAAGhcIARITd3hpZF9lMndoaG9hbzE2c28yMRryAwgHEu0DPG1zZ3NvdXJjZT4KICAgIDxhdHVzZXJsaXN0PgogICAgICAgIDwhW0NEQVRBWyx3eGlkX2V5b21nbGh2OHloODIyXV0+CiAgICA8L2F0dXNlcmxpc3Q+CiAgICA8cHVhPjE8L3B1YT4KICAgIDxzZWNfbXNnX25vZGU+CiAgICAgICAgPHV1aWQ+NGJkMDA5MjY5MmYwYmI1OTYyMTM0NzQwYzE1ZTA4MDFfPC91dWlkPgogICAgICAgIDxyaXNrLWZpbGUtZmxhZyAvPgogICAgICAgIDxyaXNrLWZpbGUtbWQ1LWxpc3QgLz4KICAgICAgICA8YWxub2RlPgogICAgICAgICAgICA8ZnI+MTwvZnI+CiAgICAgICAgPC9hbG5vZGU+CiAgICA8L3NlY19tc2dfbm9kZT4KICAgIDxzaWxlbmNlPjA8L3NpbGVuY2U+CiAgICA8bWVtYmVyY291bnQ+MjwvbWVtYmVyY291bnQ+CiAgICA8c2lnbmF0dXJlPlYxX3g5V2w3NGJ1fHYxXzJHbmhIZWcwPC9zaWduYXR1cmU+CiAgICA8dG1wX25vZGU+CiAgICAgICAgPHB1Ymxpc2hlci1pZCAvPgogICAgPC90bXBfbm9kZT4KPC9tc2dzb3VyY2U+ChokCAISIDI0OTJhMzdhMTdkYzJjOTgwOTNiZjdjNjMyMDY5YjUyGlIIBBJOd3hpZF9leW9tZ2xodjh5aDgyMlxGaWxlU3RvcmFnZVxDYWNoZVwyMDI0LTA1XGMyMWJmNDI2MzRiMDYxZDFhMjJkZDNhMjk5ZmNlODA2\",\"BytesTrans\":\"\",\"Content\":\"<?xml version=\\\"1.0\\\"?>\\n<msg>\\n\\t<appmsg appid=\\\"\\\" sdkver=\\\"0\\\">\\n\\t\\t<title>@xiaochen /天气</title>\\n\\t\\t<des />\\n\\t\\t<action>view</action>\\n\\t\\t<type>57</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<content />\\n\\t\\t<url />\\n\\t\\t<dataurl />\\n\\t\\t<lowurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<recorditem />\\n\\t\\t<thumburl />\\n\\t\\t<messageaction />\\n\\t\\t<laninfo />\\n\\t\\t<refermsg>\\n\\t\\t\\t<type>1</type>\\n\\t\\t\\t<svrid>2880020896277436103</svrid>\\n\\t\\t\\t<fromusr>38891094226@chatroom</fromusr>\\n\\t\\t\\t<chatusr>wxid_e2whhoao16so21</chatusr>\\n\\t\\t\\t<createtime>1715264448</createtime>\\n\\t\\t\\t<displayname>陈思杰</displayname>\\n\\t\\t\\t<msgsource>&lt;msgsource&gt;\\n    &lt;sec_msg_node&gt;\\n        &lt;alnode&gt;\\n            &lt;fr&gt;1&lt;/fr&gt;\\n        &lt;/alnode&gt;\\n    &lt;/sec_msg_node&gt;\\n    &lt;pua&gt;1&lt;/pua&gt;\\n&lt;/msgsource&gt;\\n</msgsource>\\n\\t\\t\\t<content>145</content>\\n\\t\\t</refermsg>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<commenturl />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>0</totallen>\\n\\t\\t\\t<attachid />\\n\\t\\t\\t<emoticonmd5 />\\n\\t\\t\\t<fileext />\\n\\t\\t\\t<aeskey />\\n\\t\\t</appattach>\\n\\t\\t<webviewshared>\\n\\t\\t\\t<publisherId />\\n\\t\\t\\t<publisherReqId>0</publisherReqId>\\n\\t\\t</webviewshared>\\n\\t\\t<weappinfo>\\n\\t\\t\\t<pagepath />\\n\\t\\t\\t<username />\\n\\t\\t\\t<appid />\\n\\t\\t\\t<appservicetype>0</appservicetype>\\n\\t\\t</weappinfo>\\n\\t\\t<websearch />\\n\\t</appmsg>\\n\\t<fromusername>wxid_e2whhoao16so21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname></appname>\\n\\t</appinfo>\\n\\t<commenturl></commenturl>\\n</msg>\\n\\u0000\",\"CreateTime\":\"1715264573\",\"DisplayContent\":\"\",\"FlagEx\":\"0\",\"IsSender\":\"0\",\"MsgSequence\":\"807762186\",\"MsgServerSeq\":\"1\",\"MsgSvrID\":\"168096442989627144\",\"Reserved0\":\"0\",\"Reserved1\":\"2\",\"Reserved2\":\"\",\"Reserved3\":\"\",\"Reserved4\":\"\",\"Reserved5\":\"\",\"Reserved6\":\"\",\"Sender\":\"wxid_e2whhoao16so21\",\"Sequence\":\"1715264573000\",\"Status\":\"2\",\"StatusEx\":\"0\",\"StrContent\":\"\",\"StrTalker\":\"38891094226@chatroom\",\"SubType\":\"57\",\"TalkerId\":\"5\",\"Type\":\"49\",\"localId\":\"1004\"}"), groupChatWithReferWithCommandWithAt)

	// chat := family.TestChatroomWxid
	// user := family.TestChatroomWxid

	privateChatMessage, err := handler.FormatMessage(*privateChat)
	if err != nil {
		t.FailNow()
	}
	log.Println(privateChatMessage)

	privateChatWithReferMessage, err := handler.FormatMessage(*privateChatWithRefer)
	if err != nil {
		t.FailNow()
	}
	log.Println(privateChatWithReferMessage)

	privateChatWithCommandMessage, err := handler.FormatMessage(*privateChatWithCommand)
	if err != nil {
		t.FailNow()
	}
	log.Println(privateChatWithCommandMessage)

	privateChatWithReferWithCommandMessage, err := handler.FormatMessage(*privateChatWithReferWithCommand)
	if err != nil {
		t.FailNow()
	}
	log.Println(privateChatWithReferWithCommandMessage)

	groupChatMessage, err := handler.FormatMessage(*groupChat)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatMessage)

	groupChatWithReferMessage, err := handler.FormatMessage(*groupChatWithRefer)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithReferMessage)

	groupChatWithCommandMessage, err := handler.FormatMessage(*groupChatWithCommand)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithCommandMessage)

	groupChatWithReferWithCommandMessage, err := handler.FormatMessage(*groupChatWithReferWithCommand)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithReferWithCommandMessage)

	groupChatWithAtMessage, err := handler.FormatMessage(*groupChatWithAt)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithAtMessage)

	groupChatWithReferWithAtMessage, err := handler.FormatMessage(*groupChatWithReferWithAt)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithReferWithAtMessage)

	groupChatWithCommandWithAtMessage, err := handler.FormatMessage(*groupChatWithCommandWithAt)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithCommandWithAtMessage)

	groupChatWithReferWithCommandWithAtMessage, err := handler.FormatMessage(*groupChatWithReferWithCommandWithAt)
	if err != nil {
		t.FailNow()
	}
	log.Println(groupChatWithReferWithCommandWithAtMessage)

}
